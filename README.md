# Light-food

 Сайт с разными рецептами на vue и expressJs
 Просмотр: https://light-food.ru/

## Начало работы
!!! Подставить свои данные в файл конфига .env!!!

$ npm install
$ npm run serve


### Клиент
* Создал макет в фигме
* Клиент реализовал на vue c vuex
* Компоненты, иконки и директивы регистрировал глобально для удобства
* Создавал и использовал директивы для VFocus для фокусировке на инпуте VIntersection для динамической подгрузки больших списков
* Использовал css переменные, а не препроцессорные тк они должны часто менять свое значение, scss не позволяет переназначать переменные
* Каждая категория рецепта имеет уникальную стилистику, в variables.css указаны стили для дефолтного оформления сайта, позже нужные стили подгружаются из базы данных
* Все части приложения разделены, стейт поделен по модулям которые используют нужные им запросы (запросы вынесены в папку service)
* Папка router содержит все страницы и миделвееры (например проверку зарегистрирован ли пользователь, проверку его роли и активирован ли аккаунт)
* Реализовал регистрацию, логин и логаут, токены входа хранятся в localstorage и в базе данных
* После регистрации нужно подтвердить почту, для этого сделан миделвеер и на клиентской и на серверной стороне, если почта не подтверждена в течение 10 минут аккаунт удаляется
* После регистрации создается пользователь с дефолтной ролью клиента, его токен авторизации сохраняется в localstorage
* Обычный пользователь может смотреть рецепты, зарегистрированный как клиент может добавлять в избранные рецепты и оставлять комментарии
* Если пользователь не заходит 15 дней, его токен меняется и логин по токену не отработает (логаут на неиспользуемом устройстве)
* Роли существует 3 (клиент, повар и админ), повар может создавать свои рецепты, а админ назначать роли, удалять посты и комментарии, создавать, удалять, редактировать и стилизовать категории, так же у админа появляется админ панель в сайдбаре для просмотра и бана пользователей, стилизации категории и создание рецептов
* Реализованы обработки ошибок и на клиенте и на сервере (например слишком короткое имя пользователя, пользователь с таким email уже зарегистрирован, пароль должен быть не длиннее 16 символов и прочее)
* Реализован регистронезависимый поиск рецепта
* Реализована кнопка "Случайный рецепт", которая выдает рандомный рецепт из бд
* Реализованы якоря в рецептах для быстрого просмотра рецептов
* Реализованны динамические метатеги для каждой страницы
* Подключена яндекс метрика

### Сервер
* Сервер сделан на express.js, в качестве базы данных использовал mongoDb
* Сервер разделен по модулям, роуты вынесены в отдельный документ где каждый роут обращается к нужной функции в его контроллере, а контроллер обращается к сервису
* Мидлвееры прописаны в отдельной папке и используются в роуте перед контролером
* В папке models модели объектов в бд
* В exceptions реализована костомная ошибка для обработки всех ошибок, она в поле message возвращает текст ошибки который видно на клиенте (например: пользователь с email ... уже зарегистрирован)
* В папке dtos класс возвращающей нужные поля (например после регистрации нужно вернуть объект пользователя, но пароль возвращать не нужно)
* Сервисы вынесены в отдельную папку и они взаимодействуют с бд, возвращают или обрабатывают данные, сохраняют картинки и прочее
* Так же для кастомизации используются 3 цвета, но в модели их 4, четвертый цвет создается на сервере для выделения в списках


Админ аккаунт
pass:Sova2380
email:admin
